"use strict";var Glitch=function(){function t(t,e){if(null===t||void 0===t)throw new Error("Element must not be null or undefined");if("object"!=typeof t||1!==t.nodeType||"string"!=typeof t.nodeName)throw new Error("Element must be a DOM element");var i={charArray:"+*/|}{[]~:;?/.=+-_)(*^%$#@!)}",textArray:["firstGlitchText","secondGlitchText","thirdGlitchText","fourthGlitchText"],backToFront:!1,offset:0,interval:{randomizing:1e3,adding:1e3,removing:1e3,inserting:1e3}};e&&i.deepExtend(e),Object.defineProperties(this,{element:{get:function(){return t},enumerable:!0,configurable:!1},_text:{set:function(t){this.element.innerHTML=t,this.element.setAttribute("data-text",t)},get:function(){return this.element.innerHTML},enumerable:!1,configurable:!1},_options:{get:function(){return i},enumerable:!1,configurable:!1},_currentTextIdx:{value:0,writable:!0,enumerable:!1,configurable:!1},_currentTextIdxMax:{value:i.textArray.length,writable:!1,enumerable:!1,configurable:!1}})}function e(){if(null===this||void 0===this)throw new Error("Missing context")}function i(){return this._currentTextIdx>=this._currentTextIdxMax?this._options.textArray[0]:this._options.textArray[this._currentTextIdx]}function n(){this._text=this._text+o.call(this)}function r(){var t=this._text;this._text=t.substr(0,t.length-1)}function o(t){return null===this||void 0===this?t[Math.floor(Math.random()*t.length)]:this._options.charArray[Math.floor(Math.random()*this._options.charArray.length)]}function s(t,e,i){var n=this._text,r=n.substr(0,t)+e+n.substr(t+1,n.length-t-1);this._text=r,i&&i()}function a(t){var a=this;(function(t){e.call(this);var i=this._text.length,n=this._options.interval.randomizing;if(this._options.backToFront)for(var r=i-1,a=0;r>=0;r--,a++)setTimeout(s.bind(this,r,o.call(this)),n/i*a),0==r&&setTimeout(t,n);else for(r=0;r<i;r++)setTimeout(s.bind(this,r,o.call(this)),n/i*r),r==i-1&&setTimeout(t,n)}).call(a,function(){(function(t){e.call(this);var o=i.call(this).length-this._text.length;if(o>0)for(var s=this._options.interval.adding,a=o;a>0;a--)setTimeout(n.bind(this),s/o*a),1==a&&setTimeout(t,s);else if(o<0){o=Math.abs(o),s=this._options.interval.removing;for(var h=o;h>0;h--)setTimeout(r.bind(this),s/o*h),1==h&&setTimeout(t,s)}else t()}).call(a,function(){(function(t){e.call(this);var n=i.call(this),r=n.length;if(r!==this._text.length)throw new Error("Length of old and new text must be the same");for(var o=this._options.interval.inserting,a=0;a<r;a++)setTimeout(s.bind(this,a,n.charAt(a)),o/r*a),a==r-1&&setTimeout(t,o)}).call(a,function(){(function(){return this._currentTextIdx=this._currentTextIdx+1==this._currentTextIdxMax?0:++this._currentTextIdx,this}).call(a),t&&t()})})})}return Object.prototype.deepExtend=function(t){if(!t)return this;for(var e in t)t[e]&&t[e].constructor&&t[e].constructor===Object?(null!==this[e]&&void 0!==this[e]||(this[e]={}),this[e].deepExtend(t[e])):this[e]=t[e];return this},Object.defineProperty(Object.prototype,"deepExtend",{enumerable:!1,writable:!1,configurable:!1}),t.prototype.animateToNext=function(t){setTimeout(a.bind(this,t),this._options.offset)},t.prototype.animateInterval=function(){setTimeout(a.bind(this,this.animateInterval.bind(this)),this._options.offset)},Object.defineProperties(t.prototype,{animateToNext:{writable:!1,enumerable:!0,configurable:!1},animateInterval:{writable:!1,enumerable:!0,configurable:!1}}),t}();
